<!DOCTYPE HTML>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css">
	</head>

	<body>
		<div class="content"><div class="contentBuffer">
			<h1>Getting Started</h1>
			<div class="columnText">
			This example will show you how to write a simple program, and flash it to the bootloader. You will need to install MPLABX and the C16 compiler. Both are availalble for free from Microchip's website.
			</div>

			<h1>A quick note about the bootloader</h1>
			<div class="columnText">

			Normally, microcontrollers are programmed using a dedicated programmer, such as the PICkit for Microchip, or the AVR usb-blaster for the AVR range. Buying a programmer can be expensive, so we opted to use a bootloader.
			<p>
			A bootloader is a special piece of code that runs before the main code on the IC. The bootloader listens for commands on the serial port. These commands are usually programming commands, but can also be used to erase or read the memory. If the bootloader received a command, it executes the command. If it does not receive a command, it continues on to the user's program.
			<p>
			The bootloader allows anyone to program the IC without dedicated hardware, using the right software. The bootloader we are using is the ds30 Loader. The specification for the protocol is open source, however, the computer software is closed source, and currently only works on Windows. 	
			<p>
			For more information about the bootloader see <a href="bootloader.html"> here.</a>
			</div>


			<h1>Setting up a project</h1>
			<div class="columnText">
				The software we use to program the IC is MPLABX. It is Microchip's new version of their IDE. It is available for Windows, Linux and OS X. Note that you need to download a compiler seperately, as each family of devices use their own compiler. The compiler we are using is the C16x compiler.
				<ol>
				<li> Download and install MPLABX</li>
				<li> Download and install the XC16 compiler. The free version does not offer any optimization.</li>
				<li>Open the IDE, go to File - New Project</li>
				<div class="image">
				<img width=500px src="./images/tutorial/1_new_project.png" alt="Screenshot of MPLABX, showing new Project screen"></img>
				</div>
				
				<li>For the project type, select Standalone Project and click next</li>
				<li>Select the correct Device. You can use the Family drop-down menu to select the correct family (16-bit DSCs dsPIC33), and then select the correct device (dsPIC33FJ32GS606).</li>
				<div class="image">
				<img width=500px src="./images/tutorial/2_device_name.png"alt="Screenshot showing device name"></img>
				</div>
				
				<li>You do not need to select any dedicated hardware, just click next. </li>
				<li>Make sure that the XC16 compiler is shown and selected. Click next</li>
				<div class="image">
				<img width=500px src="./images/tutorial/3_compiler.png"alt="Screenshot: Selecting the correct compiler"></img>
				</div>
				
				<li>Give the project a name, and make sure you know where the project is stored.</li>

				Next we are going to create folders for the .c and .h files. The IDE likes placing these files in the main directory.

				<li>Open the directory where the projects is stored. In the directory, create two new folders, <i>source</i> and <i>include</i></li>
				<li>Copy the skeleton code into the folder</li>
				<li>In MPLABX you should see the project navigator to the left. If the project is minimized, open it. Right-click on the <i>Header Files</i> option, and select <i>Add Existing item</i>. In your project folder, open the include folder and select all the files.
				<li>Do the same for the <i>Source Files</i> option, this time selecting files from the source folder.</li>
				<li>We must create a main file for the project. Go to File - New File. Select <i>C Main File</i> as the type, from the C category.</li>
				<div class="image">
				<img width=500px src="./images/tutorial/4_new_file.png"alt="Screenshot: Adding new file"></img>
				</div>
				<li>Name the file main, and change the folder to <i>source</i></li>

				You should now have an empty project, ready for your code. You will still need to make some changes to your main file before the code will work on the microcontroller.
				</ol>

				<h2>Additional Notes</h2>
				<ul>
					To change project in MPLAPX, right click the project in the Project explorer, and click <i>Set as main project</i>
				</ul>
			</div>
		</div></div> <!-- content and contentBuffer -->
	</body>
</html>